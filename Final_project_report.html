<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Hengxuan Ma" />

<meta name="date" content="2022-12-09" />

<title>Final Project Report</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="proposal.html">About Us</a>
</li>
<li>
  <a href="descriptive_statistics.html">Descriptive Statistics</a>
</li>
<li>
  <a href="patterns.html">Patterns</a>
</li>
<li>
  <a href="shiny_dashboard.html">Shiny App</a>
</li>
<li>
  <a href="report.html">Final Project Report</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Final Project Report</h1>
<h4 class="author">Hengxuan Ma</h4>
<h4 class="date">2022-12-09</h4>

</div>


<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>(Motivation: Provide an overview of the project goals and
motivation)</p>
<p>Crime rates in New York City have been recorded since at least the
1800s. The highest crime totals were recorded in the late 1980s and
early 1990s as the crack epidemic surged, and then declined continuously
through the 2000s. During the 1990s, the New York City Police Department
(NYPD) adopted CompStat and other strategies in a major effort to reduce
crime.</p>
<p>It is the fact that all of our team members have heard crime alerts
from NYPD frequently in the past year. Although we believe that New York
City is one of the safest big cities in the United States according to
the FBI, we have been so curious about the detailed information of
historical crimes happened in the New York City, especially in the
pattern where we are currently living.</p>
<p>Since in recent years the COVID-19 has brought huge effects to
people’s life, We are more interested in the changes of complaint each
year from 2020 to 2021, especially in the Manhattan borough. In this
project, we intended to explore the general information about complaint
data in the past two years, and to figure out if COVID-19 influenced the
rate or other attributes of crimes.</p>
<p>Thus, Our project aims to examine NYPD complaint data from January
2020 to December 2021 to understand the impact of COVID-19 on complaints
(crimes) in Manhattan.</p>
<p><em>Reference: <a
href="https://en.wikipedia.org/wiki/Crime_in_New_York_City"
class="uri">https://en.wikipedia.org/wiki/Crime_in_New_York_City</a></em></p>
</div>
<div id="related-work" class="section level1">
<h1>Related Work</h1>
<p>(Related work: Anything that inspired you, such as a paper, a web
site, or something we discussed in class.)</p>
<p><img src="data/NYC_Crime_Map_2021_2022.png" /></p>
<p><em>Pictured resource: <a href="https://maps.nyc.gov/crime/"
class="uri">https://maps.nyc.gov/crime/</a></em></p>
<p>Inspired by our regularly received crime alerts from Columbia
University Department of Public Safety, when we mentioned the crime rate
of NYC, all of our teammates showed great interest. When we googled it
for more information, the NYC Crime Map gave us a shock on the actual
number of crimes around us just from January 2021 to October 2022.</p>
<p>After some initial exploring, we successfully found that resources
about NYC crime and complaint data are sufficient and detailed. Based on
the information we have gathered, we decided to conduct our analysis on
the most recently published NYPD Compliant Data, which contained plenty
of attributes correlated with each complaint of crime happened and
recorded in the New York City.</p>
</div>
<div id="initial-questions" class="section level1">
<h1>Initial Questions</h1>
<p>(Initial questions: What questions are you trying to answer? How did
these questions evolve over the course of the project? What new
questions did you consider in the course of your analysis?)</p>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<p>(Data: Source, scraping method, cleaning, etc.)</p>
<p>The raw data we used was from <strong>NYC OpenData: NYPD Complaint
Data Historic</strong>: <a
href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i"
class="uri">https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i</a></p>
<p>The NYPD Complaint Data is public and readily available. The data
includes all valid felony, misdemeanor, and violation crimes reported to
the New York City Police Department (NYPD) from 2006 to the last updated
date, which was June 9, 2022 when we started our project.</p>
<p>The first and the most difficult challenge we have encountered was
that the original data was too large to be downloaded and analyzed - the
size was over 2 GB! It took us more than half an hour to obtain the
whole raw data, which contained 35 variables and more than 7 million
observations.</p>
<p>Then the first step to handle such a huge data set was to tidy out
the part that we wanted to focuse on:</p>
<pre class="r"><code>nypd_complaint_data = 
  read_csv(&quot;./data/NYPD_Complaint_Data_Historic.csv&quot;) %&gt;%
  janitor::clean_names() %&gt;%
  drop_na(cmplnt_to_dt,cmplnt_to_tm) %&gt;%
  separate(cmplnt_fr_dt, into = c(&quot;month&quot;, &quot;day&quot;, &quot;year&quot;)) %&gt;%
  mutate(year = as.numeric(year),month = as.numeric(month), day = as.numeric(day)) %&gt;%
  filter(year &gt;= 2020)

write_csv(nypd_complaint_data, &quot;./data/2020_nypd_complaint_data.csv&quot;)

nypd_complaint_2020_data = 
  read_csv(&quot;./data/nypd_complaint_data.csv&quot;) %&gt;%
  filter(year == &quot;2020&quot;, boro_nm == &quot;MANHATTAN&quot;)

nypd_complaint_2021_data = 
  read_csv(&quot;./data/nypd_complaint_data.csv&quot;) %&gt;%
  filter(year == &quot;2021&quot;, boro_nm == &quot;MANHATTAN&quot;)

nypd_complaint_two_year_data = 
  read_csv(&quot;./data/nypd_complaint_data.csv&quot;) %&gt;%
  filter(year %in% c(&quot;2020&quot;, &quot;2021&quot;), boro_nm == &quot;MANHATTAN&quot;)

write_csv(nypd_complaint_2020_data, &quot;./data/nypd_complaint_2020_data.csv&quot;)

write_csv(nypd_complaint_2021_data, &quot;./data/nypd_complaint_2021_data.csv&quot;)

write_csv(nypd_complaint_two_year_data, &quot;./data/nypd_complaint_two_year_data.csv&quot;)</code></pre>
<p><em>Since the original data was too large to be uploaded online, we
only kept it in our local repository.</em> After the initial cleaning of
data, we made the following changes:</p>
<ul>
<li>clean all the variables’ name to be tidy enough to read,
<strong>drop those complaint records without exact ending date or time
of occurrence</strong></li>
<li>separate the <strong>exact date of occurrence for the reported
event</strong> into <strong>month, day, year</strong> for further
analysis</li>
<li>keep only complaints occurred and recorded in year
<strong>2020</strong> and <strong>2021</strong> (i.e., closely related
with COVID-19 pandemic)</li>
<li>choose the borough of <strong>Manhattan</strong> as our study of
interest (i.e., strict the pattern to where we live)</li>
<li>build new data frames from the resulted data and name as
<strong>nypd_complaint_2020_data</strong>,
<strong>nypd_complaint_2021_data</strong>,
<strong>nypd_complaint_two_year_data</strong> for further analysis</li>
</ul>
<pre class="r"><code>nypd_complaint_2020_data = 
  read_csv(&quot;./data/nypd_complaint_2020_data.csv&quot;)

nypd_complaint_2021_data = 
  read_csv(&quot;./data/nypd_complaint_2021_data.csv&quot;)

nypd_complaint_two_year_data = 
  read_csv(&quot;./data/nypd_complaint_two_year_data.csv&quot;)</code></pre>
<p>After we obtained the three data sets above,
<strong>nypd_complaint_2020_data</strong> had 88,484 observations of
complaint data and <strong>nypd_complaint_2021_data</strong> had 101,990
observations of complaint data.
<strong>nypd_complaint_two_year_data</strong> was the combination of
data from both 2020 and 2021, which had 190,474 observations. Here were
some of the important variables within all of the three data sets:</p>
<ul>
<li><code>cmplnt_num</code>: Randomly generated persistent ID for each
complaint</li>
<li><code>month</code>: Exact month of occurrence for the reported
event</li>
<li><code>day</code>: Exact day of occurrence for the reported
event</li>
<li><code>year</code>: Exact year of occurrence for the reported
event</li>
<li><code>addr_pct_cd</code>: The precinct in which the incident
occurred</li>
<li><code>ky_cd</code>: Three digit offense classification code</li>
<li><code>ofns_desc</code>: Description of offense corresponding with
key code</li>
<li><code>BORO_NM</code>: The name of the borough in which the incident
occurred</li>
<li><code>susp_age_group</code>: Suspect’s Age Group</li>
<li><code>susp_race</code>: Suspect’s Race Description</li>
<li><code>susp_sex</code>: Suspect’s Sex Description</li>
<li><code>latitude</code>: Midblock Latitude coordinate for Global
Coordinate System, WGS 1984, decimal degrees (EPSG 4326)</li>
<li><code>longitude</code>: Midblock Longitude coordinate for Global
Coordinate System, WGS 1984, decimal degrees (EPSG 4326)</li>
<li><code>vic_age_group</code>: Victim’s Age Group</li>
<li><code>vic_race</code>: Victim’s Race Description</li>
<li><code>vic_sex</code>: Victim’s Sex Description</li>
</ul>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<p>(Exploratory analysis: Visualizations, summaries, and exploratory
statistical analyses. Justify the steps you took, and show any major
changes to your ideas.)</p>
<div id="descriptive-statistics" class="section level3">
<h3>Descriptive Statistics:</h3>
</div>
<div id="comparisons-of-complaints-in-manhattan-between-2020-vs-2021"
class="section level3">
<h3>Comparisons of complaints in Manhattan between 2020 vs 2021:</h3>
<p>As part of our research body, we conducted several comparisons
between the two years based on our data sets.</p>
<p><strong>Number of Complaints in Manhattan 2020 vs 2021:</strong>
Since 2020 was the year that COVID-19 had almost the most breakouts
which restricted people’s social activities, while in 2021 people were
more free from the negative effect from COVID-19, there would be
corresponding changes on the complaint and crime rates. According to the
comparison we made based on the number of complaints in 2020 and 2021,
we confirmed our assumption. The number of complaints in Manhattan of
2021 is more than in 2020 in most months. One of the reasonable
explanation may be the <strong>the affect of COVID-19 home isolation
policy</strong>, which caused a declined number of people in social
activities and resulted in the decreasing of number of complaints in
2020 compared to 2021.</p>
<pre class="r"><code>complaint_plot = read_csv(&quot;./data/nypd_complaint_two_year_data.csv&quot;) %&gt;% 
  group_by(month,year) %&gt;% 
  summarize(obs = n()) %&gt;% 
  ggplot(aes(x = month, y = obs, group = year, color = as.factor(year))) + 
  geom_point() +
  geom_line() +
  labs(x = &quot;Month&quot;, y = &quot;Number of Complaints in Manhattan&quot;, col = &quot;Year&quot;) +
  ggtitle(&quot;Number of Complaints in Manhattan 2020 vs 2021&quot;) +
  theme(axis.text.x = element_text(angle = 60, vjust = 0.2, hjust = 0.5)) +
  scale_x_continuous(
    breaks = c(1,2,3,4,5,6,7,8,9,10,11,12), 
    labels = c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Oct&quot;,&quot;Nov&quot;,&quot;Dec&quot;)) +
  viridis::scale_color_viridis(discrete = T)

complaint_plot </code></pre>
<p><img src="Final_project_report_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><strong>Number of Complaints by Types 2020 vs 2021:</strong> In order
to know more details about the types of complaints while making
comparisons between year 2020 and 2021, we specified the number of each
types of compliant and selected those types with a number over
<strong>1000</strong> in both years as effective types of complaint in
our comparison. The resulted types were classified by the NYPD as
variable <code>ofns_desc</code> in the data set and listed as
following:</p>
<ul>
<li>PETIT LARCENY</li>
<li>HARRASSMENT</li>
<li>GRAND LARCENY</li>
<li>ASSAULT 3 &amp; RELATED OFFENSES</li>
<li>CRIMINAL MISCHIEF &amp; RELATED OF</li>
<li>FELONY ASSAULT</li>
<li>BURGLARY</li>
<li>ROBBERY</li>
<li>OFF. AGNST PUB ORD SENSBLTY &amp;</li>
<li>DANGEROUS DRUGS</li>
<li>MISCELLANEOUS PENAL LAW</li>
<li>OFFENSES AGAINST PUBLIC ADMINI</li>
<li>GRAND LARCENY OF MOTOR VEHICLE</li>
</ul>
<p>AS a result, that the numbers of complaints in 2021 for almost all
types were larger than in 2020. However, when we conducted further
comparisons on the proportion of different types of complaints in 2020
and 2021, the proportion of each type didn’t change a lot from 2020 to
2021. In both two years, <strong>PETIT LARCENY</strong>,
<strong>HARRASSMENT</strong> and <strong>GRAND LARCENY</strong> were the
main types of complaints.</p>
<pre class="r"><code>complaint_type_plot = read_csv(&quot;./data/nypd_complaint_two_year_data.csv&quot;)  %&gt;% 
  group_by(ofns_desc, year) %&gt;% 
  summarise(obs = n()) %&gt;% 
  filter(obs &gt; 1000) %&gt;% 
  filter(ofns_desc != &quot;SEX CRIMES&quot;) %&gt;% 
  filter(ofns_desc != &quot;VEHICLE AND TRAFFIC LAWS&quot;) %&gt;% 
  arrange(desc(obs)) %&gt;% 
  ggplot(aes(x = ofns_desc, y = obs, fill = as.factor(year))) +
  geom_bar(stat = &quot;identity&quot;,position=position_dodge()) +
  geom_text(aes(label=obs), vjust=1.6, color=&quot;white&quot;,
            position = position_dodge(0.9), size=1.5) +
  xlab(&quot;Types pf Complaints&quot;) + ylab(&quot;Number of Complaints&quot;) + 
  ggtitle(&quot;Number of Complaints by Types 2020 vs 2021&quot;) + 
  theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust = 1, size = 5)) +
  scale_fill_discrete(name = &quot;Year&quot;)+
  viridis::scale_color_viridis(discrete = T)

complaint_type_plot</code></pre>
<p><img src="Final_project_report_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>type_pie_2020 = read_csv(&quot;./data/nypd_complaint_2020_data.csv&quot;)  %&gt;% 
  group_by(ofns_desc) %&gt;% 
  summarise(obs = n()) %&gt;% 
  filter(obs &gt; 1000) %&gt;% 
  arrange(desc(obs)) %&gt;% 
  mutate(prop = round(obs/sum(obs)*100,2)) %&gt;% 
  ggplot(aes(x = &quot;&quot;, y = prop, fill = ofns_desc)) +
  geom_bar(stat = &quot;identity&quot;,width=1, color = &quot;white&quot;)  +
  coord_polar(&quot;y&quot;, start=0) +
  geom_text(aes(label = paste0(prop, &quot;%&quot;)), position = position_stack(vjust=0.5), size = 2) +
  labs(x = NULL, y = NULL, title = &quot;2020&quot;)  +  
  theme(legend.title = element_text(size=10),legend.key.size = unit(0.5, &#39;cm&#39;))+
  theme(plot.margin = margin(0.1,0.1,0.1,0.1, &quot;cm&quot;))+
  scale_fill_discrete(name = &quot;Complaint Type&quot;) +
  viridis::scale_color_viridis(discrete = F)

type_pie_2021 = read_csv(&quot;./data/nypd_complaint_2021_data.csv&quot;)  %&gt;% 
  group_by(ofns_desc) %&gt;% 
  summarise(obs = n()) %&gt;% 
  filter(obs &gt; 1000) %&gt;% 
  arrange(desc(obs)) %&gt;% 
  filter(ofns_desc != &quot;SEX CRIMES&quot;) %&gt;% 
  filter(ofns_desc != &quot;VEHICLE AND TRAFFIC LAWS&quot;) %&gt;% 
  mutate(prop = round(obs/sum(obs)*100,2)) %&gt;% 
  ggplot(aes(x = &quot;&quot;, y = prop, fill = ofns_desc)) +
  geom_bar(stat = &quot;identity&quot;,width=1, color = &quot;white&quot;) +
  theme(legend.title = element_text(size=10),legend.key.size = unit(0.5, &#39;cm&#39;))+
  theme(plot.margin = margin(0.1,0.1,0.1,0.1, &quot;cm&quot;))+
  coord_polar(&quot;y&quot;, start=0) +
  geom_text(aes(label = paste0(prop, &quot;%&quot;)), position = position_stack(vjust=0.5), size = 2) +
  labs(x = NULL, y = NULL, title = &quot;2021&quot;, fill = &quot;Complaint Type&quot; ) +
  viridis::scale_color_viridis(discrete = F)

par(mfrow = c(2,1))
type_pie_2020</code></pre>
<p><img src="Final_project_report_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>type_pie_2021</code></pre>
<p><img src="Final_project_report_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<p><strong>Complaint Locations in Manhattan 2020 vs 2021:</strong> After
analyzing the number and types of complaints, we became more interested
in whether there is any difference in the distributions of complaint’s
specific locations in Manhattan between 2020 and 2021. If complaints
occurred in 2020 had a larger density than in 2021? Which patterns were
the most complaints occurred in each year? Was there any correlation
between the distribution of complaints and the COVID-19 status in 2020
and 2021?</p>
<p>We took locations that had <strong>10</strong> complaints and above
as the effective locations and made comparisons based on monthly
complaints in Manhattan in 2020 and 2021. Based on the results, we found
that the overall <strong>complaint density of 2021 is larger</strong>
than that in the 2020, especially in April, May and June. This had
confirmed our assumption that the recovery of social activities could
bring larger density of complaints. Meanwhile, we figured out that the
most complaints repeated <strong>in the upper city</strong> of Manhattan
in both of the two years.</p>
<pre class="r"><code>complaint_data = read_csv(&quot;./data/nypd_complaint_two_year_data.csv&quot;) %&gt;% 
  mutate(month = as.integer(month)) %&gt;% 
  as_tibble(map_data(&quot;state&quot;)) 


complaint_month_2020 = read_csv(&quot;./data/nypd_complaint_2020_data.csv&quot;) %&gt;% 
  mutate(month = as.integer(month)) %&gt;% 
  group_by(month, latitude, longitude) %&gt;% 
  summarise(obs = n()) %&gt;% 
  filter(obs &gt;= 10)

complaint_month_2021 = read_csv(&quot;./data/nypd_complaint_2021_data.csv&quot;) %&gt;% 
  mutate(month = as.integer(month)) %&gt;% 
  group_by(month, latitude, longitude) %&gt;% 
  summarise(obs = n()) %&gt;% 
  filter(obs &gt;= 10)
  
map_2020 = 
  ggplot() +
  geom_point(data = complaint_month_2020, aes(x = longitude, y = latitude, size = 0.01, color = obs), alpha = 0.5) +
  scale_size(range = c(1,8)) +
  transition_time(month) +
    labs(
    title = &quot;2020 Month: {frame_time}&quot;, 
    color = &quot;Complaints&quot;,
    x = &quot;Longitude&quot;,
    y = &quot;Latitude&quot;) +
  enter_grow() +
  exit_shrink() +
  ease_aes(&quot;sine-in-out&quot;) +
  coord_cartesian(ylim = c(40.68, 40.87), xlim = c(-74.02, -73.925)) +
   viridis::scale_color_viridis()

map_2021 = 
  ggplot() +
  geom_point(data = complaint_month_2021, aes(x = longitude, y = latitude, size = 0.01, color = obs), alpha = 0.5) +
  scale_size(range = c(1,8)) +
  transition_time(month) +
    labs(
    title = &quot;2021 Month: {frame_time}&quot;, 
    color = &quot;complaints&quot;,
    x = &quot;Longitude&quot;,
    y = &quot;Latitude&quot;) +
  theme(legend.position = &quot;none&quot;) +
  enter_grow() +
  exit_shrink() +
  ease_aes(&quot;sine-in-out&quot;) +
  coord_cartesian(ylim = c(40.68, 40.87), xlim = c(-74.02, -73.925)) +
   viridis::scale_color_viridis()


map_gif_2020 = image_read(animate(map_2020, duration = 12, fps = 1, width = 400, height = 400))
map_gif_2021 = image_read(animate(map_2021, duration = 12, fps = 1, width = 400, height = 400))

new_month_gif = image_append(c(map_gif_2020[1], map_gif_2021[1]))
for (i in 2:12) {
  combined_month = image_append(c(map_gif_2020[i], map_gif_2021[i]))
  new_month_gif = c(new_month_gif, combined_month)
}

new_month_gif</code></pre>
<p><img
src="Final_project_report_files/figure-html/unnamed-chunk-6-1.gif" /><!-- --></p>
</div>
</div>
<div id="additional-analysis" class="section level1">
<h1>Additional Analysis</h1>
<p>(Additional analysis: If you undertake formal statistical analyses,
describe these in detail)</p>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>(Discussion: What were your findings? Are they what you expect? What
insights into the data can you make?)</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
